
<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nomago Bikes - BAZA Portal</title>
    <!-- Favicon - različne velikosti za različne naprave -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
    <!-- Apple Touch Icon za iOS naprave -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <!-- Android Chrome -->
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest">
    <!-- MS Tiles za Windows -->
    <meta name="msapplication-TileColor" content="#004899">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <!-- Theme color za mobile brskalnike -->
    <meta name="theme-color" content="#004899">
    
    <!-- CSS style je že povzet iz tvoje index_backup in vsebuje chat style -->
    <style>
        /* ... celoten CSS iz index_backup, že vsebuje chat style ... */
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo" onclick="goToHomePage()">
                <span class="nom">NOM</span><span class="a">A</span><span class="go">GO</span> <span class="bikes">bikes</span>
            </div>
        </div>
        <div class="header-center" id="headerCenter" style="display: none;">
            <h1 style="color: white; font-size: 1.8rem; font-weight: 700; letter-spacing: 1px; margin: 0;">BAZA</h1>
        </div>
        <div class="header-controls">
            <div class="user-info" id="userInfo"></div>
            <button class="logout-button" id="headerLogoutBtn" onclick="logout()" style="display: none;" title="Odjavi se">
                <span class="menu-icon">🚪</span>
            </button>
            <button class="theme-toggle" onclick="toggleTheme()" title="Preklopi temo">
                <span id="themeIcon">🌙</span>
            </button>
        </div>
    </header>

    <main>
        <!-- Login Section -->
        <div class="login-card" id="loginSection">
            <div class="bike-icon">🚲</div>
            <h1 class="login-title">Dobrodošli v Nomago Bikes</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="username">Uporabniško ime</label>
                    <input type="text" class="form-input" id="username" placeholder="Vnesite uporabniško ime" required autofocus>
                </div>
                <div class="form-group">
                    <label class="form-label" for="password">Geslo</label>
                    <input type="password" class="form-input" id="password" placeholder="Vnesite geslo" required>
                </div>
                <button type="submit" class="login-button" id="loginButton">Prijavi se</button>
                <div class="error-message" id="errorMessage"></div>
                <div class="success-message" id="successMessage"></div>
            </form>
        </div>

        <!-- Dashboard Section -->
        <div class="dashboard" id="dashboardSection">
            <div class="dashboard-container">
                <!-- Sidebar Menu -->
                <nav class="sidebar">
                    <div class="sidebar-header">
                        <div class="sidebar-title">Upravljanje</div>
                        <div class="sidebar-subtitle">Nomago Bikes Portal</div>
                    </div>
                    <ul class="menu-list">
                        <li class="menu-item">
                            <button class="menu-button active" onclick="showContent('dashboard')">
                                <span class="menu-icon">🏠</span>
                                <span>Nadzorna plošča</span>
                            </button>
                        </li>
                        <li class="menu-item">
                            <button class="menu-button" onclick="showContent('chat')">
                                <span class="menu-icon">💬</span>
                                <span>Chat</span>
                            </button>
                        </li>
                        <li class="menu-item">
                            <button class="menu-button" id="addUserMenu" onclick="showContent('addUser')">
                                <span class="menu-icon">👤➕</span>
                                <span>Dodaj uporabnika</span>
                            </button>
                        </li>
                        <li class="menu-item" id="serviserMenuItem">
                            <button class="menu-button" id="serviserMenu" onclick="openServiserApp()">
                                <span class="menu-icon">🔧</span>
                                <span>Pregledi ključavnic</span>
                                <span class="alert-badge" id="inspectionAlerts" style="display: none;">0</span>
                            </button>
                        </li>
                        <li class="menu-item">
                            <button class="menu-button" id="userSettingsMenu" onclick="showContent('userSettings')">
                                <span class="menu-icon">👥</span>
                                <span>Nastavitve uporabnikov</span>
                            </button>
                        </li>
                        <li class="menu-item">
                            <button class="menu-button" id="notificationsMenu" onclick="showContent('notifications')">
                                <span class="menu-icon">📢</span>
                                <span>Obvestila</span>
                            </button>
                        </li>
                        <li class="menu-item">
                            <button class="menu-button" onclick="showContent('generalSettings')">
                                <span class="menu-icon">⚙️</span>
                                <span>Splošne nastavitve</span>
                            </button>
                        </li>
                    </ul>
                    <div class="logout-section">
                        <button class="logout-button" onclick="logout()">
                            <span class="menu-icon">🚪</span>
                            <span>Odjavi se</span>
                        </button>
                    </div>
                </nav>

                <!-- Main Content Area -->
                <main class="main-content">
                    <!-- Dashboard Content -->
                    <div class="content-section" id="dashboardContent" style="display: block;">
                        <div class="content-header">
                            <h1 class="content-title">Nadzorna plošča</h1>
                            <p class="content-subtitle">Dobrodošli v Nomago Bikes upravljavskem portalu</p>
                        </div>

                        <!-- Sync Status -->
                        <div id="syncStatus" class="sync-status synced">
                            <span>🔄</span>
                            <span>Sinhronizirano z Firebase</span>
                        </div>

                        <!-- Inspection Widget -->
                        <div class="inspection-widget" id="inspectionWidget">
                            <h3>📋 Pregledi ključavnic</h3>
                            
                            <!-- Data Source Info -->
                            <div style="background: rgba(0, 123, 255, 0.1); padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-dark);">
                                <strong>📊 Vir podatkov:</strong> Firebase sistem | 
                                <strong>Zadnja osvežitev:</strong> <span id="lastRefreshTime">Nalaganje...</span> |
                                <button onclick="refreshInspectionData()" style="background: none; border: none; color: var(--primary-blue); cursor: pointer; text-decoration: underline;">🔄 Osveži zdaj</button>
                            </div>
                            
                            <div class="inspection-stats" id="inspectionStats">
                                <div class="stat-item" id="overdueStats">
                                    <div class="stat-number danger" id="overdueCount">0</div>
                                    <div class="stat-label">Zamujeni pregledi</div>
                                </div>
                                <div class="stat-item" id="dueSoonStats">
                                    <div class="stat-number warning" id="dueSoonCount">0</div>
                                    <div class="stat-label">Pregledi kmalu</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number success" id="totalCount">0</div>
                                    <div class="stat-label">Skupaj ključavnic</div>
                                </div>
                            </div>
                            
                            <!-- Debug Info for Admins -->
                            <div id="debugInfo" style="display: none; background: rgba(108, 117, 125, 0.1); padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem; font-size: 0.8rem; color: var(--text-light);">
                                <strong>🔍 Debug podatki:</strong><br>
                                <span id="debugText">Nalaganje debug informacij...</span>
                            </div>
                            
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="inspection-button" onclick="openServiserApp()" style="flex: 1;">
                                    🔧 Odpri aplikacijo za preglede
                                </button>
                                <button onclick="toggleDebugInfo()" class="btn" style="background: var(--text-light); color: white; padding: 0.75rem; border-radius: 6px; font-size: 0.8rem;">
                                    🐛 Debug
                                </button>
                            </div>
                        </div>

                        <!-- Notifications Display -->
                        <div id="notificationsDisplay"></div>

                        <div class="content-card welcome-card">
                            <div class="welcome-icon">🚴‍♂️</div>
                            <h2 class="welcome-text">Uspešno ste se prijavili!</h2>
                            <p class="welcome-description" id="welcomeMessage">
                                Uporabite levi meni za navigacijo po različnih funkcijah portala.
                            </p>
                        </div>
                    </div>

                    <!-- CHAT CONTENT SECTION (novo, iz index.html) -->
                    <div class="content-section" id="chatContent">
                        <div class="content-header">
                            <h1 class="content-title">Chat sistem</h1>
                            <p class="content-subtitle">Komunicirajte z drugimi uporabniki v realnem času</p>
                        </div>
                        <div class="content-card" style="padding: 0; height: 70vh; display: flex; flex-direction: column;">
                            <!-- Chat Header -->
                            <div class="chat-header" style="border-radius: 12px 12px 0 0; margin: 0;">
                                <div class="chat-title">
                                    <span>💬</span>
                                    <span>Nomago Chat</span>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn btn-primary btn-small" onclick="openNewChatModal()">+ Nova</button>
                                    <button class="btn btn-secondary btn-small" onclick="refreshChats()">🔄</button>
                                </div>
                            </div>
                            <!-- Chat Body -->
                            <div style="flex: 1; display: flex; overflow: hidden;">
                                <!-- Left Side - Contacts -->
                                <div style="width: 300px; border-right: 1px solid #e0e0e0; display: flex; flex-direction: column;">
                                    <!-- sem se doda kontakty -->
                                </div>
                                <!-- Right Side - Messages -->
                                <div style="flex: 1; display: flex; flex-direction: column;">
                                    <!-- sem se doda sporočila -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ostale sekcije tvoje aplikacije gredo tukaj ... -->

                </main>
            </div>
        </div>
    </main>
</body>
</html>
